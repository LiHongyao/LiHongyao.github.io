(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"2d7d":function(e,t,n){"use strict";n.r(t);var i=n("97b5"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},"6faf":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"uni-page-body[data-v-33ceee32]{background:#f5f5f5;-webkit-box-sizing:border-box;box-sizing:border-box;padding-top:%?60?%}.top-bar[data-v-33ceee32]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 %?24?%}.close[data-v-33ceee32]{width:%?50?%;height:%?50?%}.register-btn[data-v-33ceee32]{font-size:%?32?%;color:#316af5}.logo[data-v-33ceee32]{display:block;width:%?160?%;height:%?160?%;margin:%?40?% auto}\n/* 表单元素 */uni-form[data-v-33ceee32]{display:block;width:90%;margin:%?120?% auto 0 auto}.form-item[data-v-33ceee32]{background:#fff;height:%?80?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:%?40?% 0;font-size:%?28?%;font-weight:300}.form-item .icon[data-v-33ceee32]{width:%?70?%;height:%?70?%}.login-btn[data-v-33ceee32]{height:%?85?%;background:#316af5;color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:%?70?%;font-weight:300;letter-spacing:%?20?%}.wechat-login[data-v-33ceee32]{width:%?120?%;text-align:center;margin:%?100?% auto}.wechat-login .icon[data-v-33ceee32]{width:%?80?%;height:%?80?%}.wechat-login .text[data-v-33ceee32]{font-size:%?16?%}body.?%PAGE?%[data-v-33ceee32]{background:#f5f5f5}",""])},"88c0":function(e,t,n){var i=n("6faf");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("eda8ef36",i,!0,{sourceMap:!1,shadowMode:!1})},"8f06":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"top-bar"},[n("v-uni-image",{staticClass:"close",attrs:{src:"../../static/close.png",mode:"aspectFit"},on:{click:function(t){t=e.$handleEvent(t),e.handleCloseBtnTap(t)}}}),n("v-uni-view",{staticClass:"register-btn",on:{click:function(t){t=e.$handleEvent(t),e.handleRegisterBtnTap(t)}}},[e._v("注册")])],1),n("v-uni-image",{staticClass:"logo",attrs:{src:"../../static/icon.png",mode:"aspectFit"}}),n("v-uni-form",[n("v-uni-view",{staticClass:"form-item"},[n("v-uni-image",{staticClass:"icon",attrs:{src:"../../static/tel.png",mode:"aspectFit"}}),n("v-uni-input",{attrs:{type:"number",maxlength:"11",placeholder:"请输入手机号码"},on:{confirm:function(t){t=e.$handleEvent(t),e.handleLoginBtnTap(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-uni-view",{staticClass:"form-item"},[n("v-uni-image",{staticClass:"icon",attrs:{src:"../../static/password.png",mode:"aspectFit"}}),n("v-uni-input",{attrs:{type:"text",password:"true",maxlength:"11",placeholder:"请输入手机密码"},on:{confirm:function(t){t=e.$handleEvent(t),e.handleLoginBtnTap(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-uni-view",{staticClass:"login-btn",on:{click:function(t){t=e.$handleEvent(t),e.handleLoginBtnTap(t)}}},[e._v("登录")])],1),n("v-uni-view",{staticClass:"wechat-login",on:{click:function(t){t=e.$handleEvent(t),e.loginWithWechat(t)}}},[n("v-uni-image",{staticClass:"icon",attrs:{src:"../../static/wechat-login.png",mode:"aspectFit"}}),n("v-uni-view",{staticClass:"text"},[e._v("微信登陆")])],1)],1)},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},"97b5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{username:"",password:""}},methods:{handleRegisterBtnTap:function(){uni.navigateTo({url:"../register/register"})},handleCloseBtnTap:function(){uni.switchTab({url:"../index/index"})},handleLoginBtnTap:function(){var e=this;uni.hideKeyboard(),this.password&&this.username?/^1[345789]\d{9}$/.test(this.username)?(uni.showLoading({title:"登陆中...",mask:!0}),uni.request({url:this.$url+"/api/login",data:{username:this.username,password:this.password},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){200==t.data.code?(t.data.data.avatar="data:image/jpeg;base64,"+t.data.data.avatar,e.$store.commit("loginUser",t.data.data),uni.switchTab({url:"../index/index"})):uni.showModal({title:"温馨提示",content:"用户名或密码错误",showCancel:!1})},complete:function(){uni.hideLoading()}})):uni.showModal({title:"温馨提示",content:"请输入合法手机号！",showCancel:!1}):uni.showModal({title:"温馨提示",content:"请输入账号或密码",showCancel:!1})},loginWithWechat:function(){var e=this;"android"!==uni.getSystemInfoSync().platform?(uni.showLoading({title:"登陆中...",mask:!0}),uni.login({provider:"weixin",success:function(t){uni.getUserInfo({provider:"weixin",success:function(t){uni.request({url:e.$url+"/api/login",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{type:"微信",username:t.userInfo.unionId,nickName:t.userInfo.nickName,city:t.userInfo.city,avatarUrl:t.userInfo.avatarUrl},success:function(t){uni.hideLoading(),e.$store.commit("loginUser",t.data.data),uni.switchTab({url:"../index/index"})}})}})}})):uni.showModal({title:"温馨提示",content:"安卓端暂不支持微信登陆!",showCancel:!0})}}};t.default=i},"9ef6":function(e,t,n){"use strict";n.r(t);var i=n("8f06"),a=n("2d7d");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("bd15");var o=n("2877"),c=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"33ceee32",null);t["default"]=c.exports},bd15:function(e,t,n){"use strict";var i=n("88c0"),a=n.n(i);a.a}}]);